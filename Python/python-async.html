<!DOCTYPE html><html lang="en"><head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="mobile-web-app-capable" content="yes">

    <link rel="icon" type="image/png" href="/favicon.ico"> 
    <title>
        python async
    </title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous"> 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">   
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/themes/prism.min.css" integrity="sha256-vtR0hSWRc3Tb26iuN2oZHt3KRUomwTufNIf5/4oeCyg=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/styles/github-gist.min.css" integrity="sha256-tAflq+ymku3Khs+I/WcAneIlafYgDiOQ9stIHH985Wo=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/emojify.js/1.1.0/css/basic/emojify.min.css" integrity="sha256-UOrvMOsSDSrW6szVLe8ZDZezBxh5IoIfgTwdNDgTjiU=" crossorigin="anonymous"> 
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="/assets/css/google-fonts.css">
</head>

<body>
       <div class="path-browser container-fluid"><a href="/">Home</a> / <a href="/Python">Python</a> / python-async</div>
    <div id="doc" class="markdown-body container-fluid">
        <h2>Future</h2>
<p>python &#x4E2D;&#x7684; Future &#x76F8;&#x5F53;&#x4E8E; js &#x4E2D;&#x7684; Promise &#xFF0C;&#x529F;&#x80FD;&#x662F;&#x628A;&#x201D;&#x4E8B;&#x4EF6;&#x53D1;&#x751F;&#x201C; &#x4E0E;&#x201D;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x201C; &#x5206;&#x79BB;&#x3002;&#x4E0D;&#x4EC5;&#x53EF;&#x4EE5;&#x5148;&#x6CE8;&#x518C;callback, &#x7B49;&#x201C;&#x4E8B;&#x4EF6;&#x53D1;&#x751F;&#x201D;&#xFF08;Future&#x4E2D;&#x662F;set_result, js&#x4E2D;&#x662F;resolve)&#x540E;&#x81EA;&#x52A8;&#x8C03;&#x7528;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;callback; &#x8FD8;&#x53EF;&#x4EE5;&#x5728; set_result&#x540E;&#x5728;&#x6CE8;&#x518C;callback. &#x5185;&#x90E8;&#x901A;&#x8FC7;&#x4FDD;&#x5B58;&#x201D;&#x4E8B;&#x4EF6;&#x53D1;&#x751F;&#x201C;&#x8FD9;&#x4E00;&#x72B6;&#x6001;&#x6765;&#x5B9E;&#x73B0; Deferred &#x6548;&#x679C;&#x3002;</p>
<h2>Select</h2>
<p>python&#x4E2D;&#x7684;select module&#x4E2D;&#x6709;&#x9488;&#x5BF9;&#x4E0D;&#x540C;&#x5E73;&#x53F0;&#x7684;&#x7CFB;&#x7EDF;&#x51FD;&#x6570;&#x6765;&#x5B8C;&#x6210;IO&#x590D;&#x7528;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x6700;&#x539F;&#x59CB;&#x7684;&#x662F;select&#x51FD;&#x6570;, &#x5728;&#x5927;&#x591A;&#x6570;&#x5E73;&#x53F0;&#x4E0A;&#x90FD;&#x6709;&#x3002;poll&#x6BD4; select&#x66F4;&#x4F18;&#x5316;&#x4E00;&#x4E9B;&#xFF0C;&#x672C;&#x8D28;&#x4E0A;&#x5DEE;&#x4E0D;&#x591A;&#x3002;&#x53EA;&#x5B58;&#x5728;&#x4E8E;linux&#x4E0A;&#x7684;epoll &#x4EE5;&#x53CA; BSD &#x4E0A;&#x7684; kqueue&#xFF0C;windows&#x4E0A;&#x7684;IOCP, Solaris&#x4E0A;&#x7684;devpoll &#x5219;&#x66F4;&#x52A0;&#x4F18;&#x5316;&#x548C;&#x5F3A;&#x5927;&#x3002;&#x5176;&#x4E2D;IOCP&#x662F;&#x771F;&#x6B63;&#x7684;&#x5F02;&#x6B65;&#xFF0C;&#x4E0D;&#x5B58;&#x5728;&#x963B;&#x585E;&#xFF0C;&#x5176;&#x5B83;&#x6216;&#x591A;&#x6216;&#x5C11;&#x6709;&#x4E00;&#x70B9;&#x963B;&#x585E;&#xFF0C;epoll&#x548C;kqueue&#x5728;&#x6027;&#x80FD;&#x4E0A;&#x57FA;&#x672C;&#x4E0A;&#x66F4;&#x771F;&#x6B63;&#x7684;&#x5F02;&#x6B65;&#x5DEE;&#x4E0D;&#x591A;&#xFF0C;devpoll&#x4E0D;&#x592A;&#x6E05;&#x695A;&#x3002;</p>
<p>&#x8FD9;&#x4E9B;&#x7C7B;select&#x51FD;&#x6570;&#x6839;&#x636E;&#x5E73;&#x53F0;&#x7684;&#x4E0D;&#x540C;&#xFF0C;&#x6709;&#x7684;&#x53EA;&#x652F;&#x6301;sockets&#xFF08;IOCP), &#x6709;&#x7684;&#x8FD8;&#x652F;&#x6301;pipe( epoll ) &#x6216;&#x5176;&#x5B83;file-like objects. &#x6709;&#x7684;&#x53EA;&#x80FD;&#x76D1;&#x542C;&#x5230;readable/writable/error, &#x6709;&#x7684;&#x80FD;&#x7CBE;&#x786E;&#x533A;&#x5206;&#x66F4;&#x590D;&#x6742;&#x7684;&#x4E8B;&#x4EF6;&#x3002;epoll &#x6709;&#x6C34;&#x5E73;&#xFF08;level&#xFF09;&#x89E6;&#x53D1;&#x548C;&#x8FB9;&#x6CBF;&#xFF08;edge)&#x89E6;&#x53D1;&#x3002;</p>
<p>python&#x4E2D;&#x7684;selectors module (&#x76F8;&#x5F53;&#x4E8E;nodejs&#x4E2D;&#x9690;&#x542B;&#x5728;&#x5185;&#x90E8;&#x7684;libuv&#x5E93;&#xFF09; &#x5219;&#x5C06;&#x8FD9;&#x4E9B;&#x4E0D;&#x540C;&#x7684;select&#x51FD;&#x6570;&#x62BD;&#x8C61;&#x6210;&#x4E00;&#x4E2A;&#x7EDF;&#x4E00;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x7528;&#x6237;&#x53EA;&#x9700;&#x8981;&#x7528;DefaultSelector &#x6765;&#x83B7;&#x5F97;&#x5F53;&#x524D;&#x5E73;&#x53F0;&#x4E0B;&#x6700;&#x9002;&#x5408;&#x7684;select&#x3002;&#x8FD9;&#x4E9B;&#x7C7B;select&#x4E3B;&#x8981;&#x5B9E;&#x73B0;&#x4EE5;&#x4E0B;&#x529F;&#x80FD;</p>
<p>register(fileobj, events, data=Non): &#x6CE8;&#x518C;fileobj &#x4EE5;&#x53CA;&#x9700;&#x8981;&#x76D1;&#x542C;&#x7684;&#x4E8B;&#x4EF6;</p>
<p>unregister(fileobj): &#x6CE8;&#x9500;</p>
<p>modify(fileobj, events, data=Non): &#x66F4;&#x6539;</p>
<p>select(timeout=None): &#x8FD4;&#x56DE;&#x6709;&#x201D;&#x4E8B;&#x4EF6;&#x53D1;&#x751F;&#x201C;&#x7684;(key, events) list, &#x5176;&#x4E2D;&#x7684;key &#x4E3A;SectorKey&#x7C7B;&#xFF0C;&#x5305;&#x542B;fileobj, fd, events, data&#x3002;&#x8BE5;&#x65B9;&#x6CD5;&#x4F1A;&#x6839;&#x636E;timeout&#x7684;&#x503C;&#x8FDB;&#x884C;&#x963B;&#x585E;&#x6216;&#x975E;&#x963B;&#x585E;&#x8C03;&#x7528;&#x3002;&#x5176;&#x5185;&#x90E8;&#x539F;&#x7406;&#x6BD4;&#x8F83;&#x590D;&#x6742;&#xFF0C;&#x5927;&#x81F4;&#x662F;&#x7ED3;&#x5408;&#x4E86;&#x4E2D;&#x65AD;&#x548C;&#x8F6E;&#x8BE2;&#x6765;&#x5B9E;&#x73B0;&#x7684;&#x3002;</p>
<p><a href="http://blog.csdn.net/hdutigerkin/article/details/7517390">epoll&#x8BE6;&#x7EC6;&#x5DE5;&#x4F5C;&#x539F;&#x7406;</a></p>
<h2>asyncio</h2>
<p>&#x6709;&#x4E86;python&#x7684;callback&#x673A;&#x5236;&#xFF0C;&#x4EE5;&#x53CA;select module, &#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x53EF;&#x4EE5;&#x624B;&#x5199;&#x5730;&#x5B9E;&#x73B0;python&#x4E2D;&#x7684;&#x5F02;&#x6B65;&#x529F;&#x80FD;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x8FD9;&#x6837;&#x5199;&#x4F1A;&#x5F88;&#x9EBB;&#x70E6;&#xFF0C;&#x4EE3;&#x7801;&#x4E0D;&#x6613;&#x8BFB;&#x3002;&#x4E8E;&#x662F;&#x5C31;&#x6709;&#x4E86;&#x5404;&#x79CD;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;&#x6765;&#x7B80;&#x5316;&#xFF0C;&#x5982; Tornado, Twisted, Gevent, Eventlet, greenlet&#x7B49;&#x3002;&#x4ECE;3.4&#x5F00;&#x59CB;, python&#x5F15;&#x5165;&#x4E86;&#x6807;&#x51C6;&#x5E93; asyncio.</p>
<ul>
<li>greenlet &#xFF08;&#x6BD4;&#x8F83;&#x4F4E;&#x7EA7;&#xFF0C;&#x4E00;&#x822C;&#x7528;&#x6765;&#x6784;&#x5EFA;&#x5176;&#x5B83;&#x5E93;&#xFF09;</li>
<li>Eventlet (&#x57FA;&#x4E8E;IO&#x590D;&#x7528;&#x548C;coroutine, &#x76F8;&#x5F53;&#x4E8E;implictly&#x8C03;&#x7528;coroutine, &#x4E0D;&#x9700;&#x8981;&#x50CF;coroutine&#x90A3;&#x6837;explictly&#x5207;&#x6362;&#x63A7;&#x5236;&#x6D41;)</li>
<li>Gevent (&#x4E0E;Eventlet&#x7C7B;&#x4F3C;&#xFF0C;&#x4F46;&#x529F;&#x80FD;&#x66F4;&#x5F3A;&#x5927;&#xFF09;</li>
<li>Twisted&#xFF08;&#x9762;&#x5411;&#x5BF9;&#x8C61;&#xFF0C;&#x57FA;&#x4E8E;&#x4E8B;&#x4EF6;&#x9A71;&#x52A8;&#x7684;&#x7F51;&#x7EDC;&#x5E93;&#xFF0C;&#x6BD4;&#x8F83;&#x4F4E;&#x7EA7;&#xFF09;</li>
<li>Tornado (&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;web&#x6846;&#x67B6;&#x548C;&#x5F02;&#x6B65;&#x7F51;&#x7EDC;&#x5E93;&#x4F7F;&#x7528;&#xFF0C;&#x540C;&#x6837;&#x57FA;&#x4E8E;IO&#x590D;&#x7528;&#x548C;coroutine&#xFF09;</li>
</ul>
<p>async&#x5B9E;&#x73B0;&#x4E86;&#x8BB8;&#x591A;&#x529F;&#x80FD;&#xFF0C;&#x8981;&#x7406;&#x89E3;&#x5B83;&#x7684;&#x8BDD;&#x9700;&#x8981;&#x7406;&#x89E3;&#x4EE5;&#x4E0B;&#x51E0;&#x4E2A;&#x5173;&#x952E;&#x7684;&#x4E1C;&#x897F;&#xFF1A;coroutine, Task, event_loop</p>
<h2>Coroutine</h2>
<p>coroutine&#x662F;&#x901A;&#x8FC7;&#x5C06;Future&#x4E0E;generator&#x7ED3;&#x5408;&#x5B9E;&#x73B0;&#x7684;, &#x5176;&#x6838;&#x5FC3;&#x5728;&#x4E8E;&#xFF1A;</p>
<ol>
<li>&#x901A;&#x8FC7;yield&#x4E00;&#x4E2A;Future&#x5C06;&#x8BE5;&#x8FD0;&#x884C;&#x4E2D;&#x7684;coroutine&#x63A7;&#x5236;&#x6D41;&#x201D;&#x6302;&#x8D77;&#x201C; &#xFF0C;&#x76F8;&#x5F53;&#x4E8E;thread&#x4E2D;&#x7684;sleep&#x3002;&#x7136;&#x800C;&#x8FD9;&#x91CC;&#x662F;&#x901A;&#x8FC7;generator&#x7684;&#x673A;&#x5236;&#x6765;&#x4FDD;&#x5B58;&#x5176;&#x8FD0;&#x884C;&#x4E2D;&#x95F4;&#x72B6;&#x6001;&#xFF0C;&#x800C;&#x4E0D;&#x662F;thread&#x4E2D;&#x7684;context switch. &#x8FD9;&#x6837;&#x4E0D;&#x4EC5;&#x6BD4;thread&#x8282;&#x7701;&#x65F6;&#x95F4;&#x548C;&#x7A7A;&#x95F4;&#x8D44;&#x6E90;&#xFF0C;&#x8FD8;&#x80FD;&#x51CF;&#x5C11;&#x7EDD;&#x5927;&#x591A;&#x6570;&#x7684;data race. &#x56E0;&#x4E3A;&#x8FD9;&#x91CC;&#x7684;&#x63A7;&#x5236;&#x6D41;&#x53EA;&#x5728;yield&#x5904;&#x624D;&#x4F1A;&#x88AB;&#x6302;&#x8D77;&#xFF0C;&#x800C;thread&#x7684;&#x6302;&#x8D77;&#x662F;&#x7531;&#x5185;&#x6838;&#x51B3;&#x5B9A;&#x7684;&#xFF0C;&#x53EF;&#x53D1;&#x751F;&#x7684;&#x4EFB;&#x610F;&#x65F6;&#x5019;&#xFF08;&#x9664;&#x975E;&#x52A0;&#x9501;&#xFF0C;disable&#x4E2D;&#x65AD;&#xFF09;&#x3002;&#x56E0;&#x4E9B;coroutne&#x67D0;&#x79CD;&#x610F;&#x4E49;&#x4E0A;&#x53EF;&#x770B;&#x4F5C;green thread(&#x8F7B;&#x91CF;&#x7EA7;&#x7EBF;&#x7A0B;&#xFF09;</li>
<li>&#x5728;&#x9700;&#x8981;&#x7684;&#x65F6;&#x5019;&#xFF08;&#x4F8B;&#x5982;Task&#x4E2D;&#xFF09;&#xFF0C;&#x901A;&#x8FC7;send&#x5C06;&#x67D0;&#x4E2A;coroutine&#x5524;&#x9192;</li>
<li>coroutine &#x7684;&#x597D;&#x5904;&#x5728;&#x4E8E;&#x53EF;&#x4EE5;&#x5C06;&#x5F02;&#x6B65;&#x6D41;&#x7528;&#x540C;&#x6B65;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x5199;&#x3002;</li>
</ol>
<h2>Task</h2><div>&#x4EE5;&#x4E0B;&#x662F;Task&#x7684;&#x4E00;&#x4E2A;&#x7B80;&#x5316;&#x7248;</div>
<pre><code class="c_cpp hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span>
<span data-linenumber="13"></span>
<span data-linenumber="14"></span></div><div class="code"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Task</span>:</span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span><span class="hljs-params">(<span class="hljs-keyword">self</span>, coro)</span></span>:
  <span class="hljs-keyword">self</span>.coro = coro
  f = Future()
  f.set_result(None)
  <span class="hljs-keyword">self</span>.step(f)

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">step</span><span class="hljs-params">(<span class="hljs-keyword">self</span>, future)</span></span>:
  <span class="hljs-symbol">try:</span>
  next_future = <span class="hljs-keyword">self</span>.coro.send(future.result)
  except <span class="hljs-symbol">StopIteration:</span>
  <span class="hljs-keyword">return</span>

  next_future.add_done_callback(<span class="hljs-keyword">self</span>.step)
</div></div></code></pre>
<p>&#x6BCF;&#x6784;&#x9020;&#x4E00;&#x4E2A;Task, &#x5176;&#x4E2D;&#x7684;coroutine&#x5C31;&#x4F1A;&#x6267;&#x884C;&#xFF0C;&#x4E00;&#x76F4;&#x5230;yield&#x5904;&#x201D;&#x6302;&#x8D77;&#x201C;&#xFF0C;&#x5E76;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;Future&#x3002;&#x7B49;&#x5230;Future&#x88AB;set_result&#x540E;&#xFF0C;&#x8BE5;coroutine&#x53C8;&#x4F1A;&#x88AB;&#x201D;&#x5524;&#x9192;&#x201C;&#x3002;&#x5176;&#x4E2D;Future&#x7684;set_result&#x662F;&#x7531;select&#x6765;&#x5B8C;&#x6210;&#x7684;&#x3002;</p>
<h2>Event_loop</h2><div>run_until_complete&#x51FD;&#x6570;&#x63A5;&#x6536;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;Task&#x5BF9;&#x8C61;&#xFF08;&#x82E5;&#x662F;Future&#x7684;&#x8BDD;&#xFF0C;&#x4F1A;&#x81EA;&#x52A8;&#x5305;&#x88C5;&#x751F;&#x6210;Task)&#xFF0C;&#x76F4;&#x81F3;&#x6240;&#x6709;&#x7684;Task&#x8FD4;&#x56DE;&#x3002;&#x8FD9;&#x4E9B;Task&#x7684;&#x201D;&#x7528;&#x6237;&#x4EE3;&#x7801;&#x201C; &#x53EF;&#x4EE5;&#x770B;&#x4F5C;&#x662F;&#x8FD0;&#x884C;&#x5728;&#x5355;&#x7EBF;&#x7A0B;&#x4E2D;&#xFF0C;&#x800C;IO&#x64CD;&#x4F5C;&#x662F;&#x901A;&#x8FC7;select&#x529F;&#x80FD;&#x5F97;&#x5230;&#x590D;&#x7528;&#x3002;</div>
<pre><code class="c_cpp hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span>
<span data-linenumber="13"></span>
<span data-linenumber="14"></span>
<span data-linenumber="15"></span></div><div class="code"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EventLoop</span>:</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run_until_complete</span><span class="hljs-params">(self, coro)</span>:</span>
        <span class="hljs-string">&quot;&quot;&quot;Run until the coroutine is done.&quot;&quot;&quot;</span>
        task = Task(coro)
        task.add_done_callback(stop_callback)
        <span class="hljs-keyword">try</span>:
            self.run_forever()
        <span class="hljs-keyword">except</span> StopError:
            <span class="hljs-keyword">pass</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StopError</span><span class="hljs-params">(BaseException)</span>:</span>
    <span class="hljs-string">&quot;&quot;&quot;Raised to stop the event loop.&quot;&quot;&quot;</span>

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">stop_callback</span><span class="hljs-params">(future)</span>:</span>
    <span class="hljs-keyword">raise</span> StopError
</div></div></code></pre>
<p>&#x6709;&#x4E86;coroutine, Task, Event_loop &#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x9700;&#x8981;&#x81EA;&#x5DF1;&#x5199;select&#x7684;&#x6CE8;&#x518C;/&#x6CE8;&#x9500;/&#x8FD4;&#x56DE;&#x4E8B;&#x4EF6; &#x7B49;&#x64CD;&#x4F5C;&#xFF0C;register&#x5199;&#x5728;yield&#x524D;&#xFF0C;unregister&#x5199;&#x5728;yield&#x540E;&#x3002;&#x4F46;&#x662F;&#x4E00;&#x4E9B;&#x652F;&#x6301;&#x5F02;&#x6B65;&#x7684;&#x5E93;&#x4F1A;&#x81EA;&#x52A8;&#x5B9E;&#x73B0;&#x8FD9;&#x4E24;&#x6B65;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x624B;&#x52A8;&#x6765;&#x5199;&#x3002;&#x4F8B;&#x5982;aiohttp.</p>
<p>selector.select()&#x51FD;&#x6570;&#x7684;&#x8C03;&#x7528;&#x4E5F;&#x4E0D;&#x9700;&#x8981;&#x624B;&#x5199;&#xFF0C;&#x4E2A;&#x4EBA;&#x731C;&#x6D4B;&#x662F;event_loop&#x81EA;&#x52A8;&#x5F00;&#x4E86;&#x8FD9;&#x6837;&#x4E00;&#x4E2A;coroutine (&#x6216;thread)&#x8FD0;&#x884C;&#x3002;</p>
<pre><code class="c_cpp hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span></div><div class="code"><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
    events = selector.<span class="hljs-keyword">select</span>()
    <span class="hljs-keyword">for</span> event_key, event_mask <span class="hljs-keyword">in</span> events:
        callback = event_key.data
        callback(event_key, event_mask)
</div></div></code></pre>

    </div>
    <div class="ui-toc dropup unselectable hidden-print" style="display:none;">
        <div class="pull-right dropdown">
            <a id="tocLabel" class="ui-toc-label btn btn-default" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false" title="Table of content">
                <i class="fa fa-bars"></i>
            </a>
            <ul id="ui-toc" class="ui-toc-dropdown dropdown-menu" aria-labelledby="tocLabel">
                
            </ul>
        </div>
    </div>
    <div id="ui-toc-affix" class="ui-affix-toc ui-toc-dropdown unselectable hidden-print" data-spy="affix" style="top:17px;display:none;">
        
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous" defer></script>
      
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script>
    </body></html>